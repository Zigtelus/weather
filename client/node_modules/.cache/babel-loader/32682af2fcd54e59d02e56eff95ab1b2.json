{"ast":null,"code":"var _jsxFileName = \"/Users/gregory/Desktop/untitled folder 2/wwww/weather/client/src/components/Pages/Blog/Comment/index.tsx\",\n    _s = $RefreshSig$();\n\nimport './index.scss';\nimport { useAppDispatch, useAppSelector } from '../../../../hooks/redux';\nimport { removeCommentsAction } from '../../../../store/comments/actions/removeComment.action';\nimport month from '../../../../helpers/months';\nimport { remakeCommentsAction } from '../../../../store/comments/actions/remakeComment.action';\nimport { removeComment } from '../../../../store/comments/slices/comments.slice';\nimport { useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Comment(_ref) {\n  _s();\n\n  let {\n    articleId,\n    userId,\n    commentData,\n    userEmail\n  } = _ref;\n  const commentId = commentData.commentId;\n  const comments = useAppSelector(state => state.commentsReducer.main);\n  const refTextComment = useRef();\n  const commentRef = useRef(); // commentRef.current.innerHTML = \n  // const qqq = ()=> {\n  //   const URL = 'https://weather-back-deploy.herokuapp.com/main/api/users/b1e741c5-46ba-4705-91e7-b754ec3df054'\n\n  const [chengeComment, setChengeComment] = useState(false); //   fetchSend(URL)\n  //   .then((response) => response.json())\n  //   .then((json) => console.log(json));\n  // }\n  // function fetchSend(URL: string) {\n  //   return fetch(URL, {\n  //     method: 'GET'\n  //   })\n  // }\n\n  const dispatch = useAppDispatch(); // console.log(dateCreation)\n  // console.log(new Date(dateCreation).getDate())\n\n  const dateCreatin = new Date(commentData.dateCreation);\n  const monthCreation = dateCreatin.getMonth();\n  const dateInMonth = dateCreatin.getDate();\n\n  const sendForm = () => {\n    if (chengeComment) {\n      commentData.text = refTextComment.current.value;\n      remakeCommentsAction({\n        articleId,\n        commentData\n      });\n    }\n\n    setChengeComment(!chengeComment);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'article__comment',\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'article__comment__top',\n      ref: commentRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: commentData.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [dateInMonth, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: month(monthCreation + 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: 'article__comment__body',\n      children: chengeComment ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043A\\u0441\\u0442 \\u043A\\u043E\\u043C\\u043C\\u0435\\u0440\\u0442\\u0430\\u0440\\u0438\\u044F\",\n        ref: refTextComment,\n        defaultValue: commentData.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }, this) : commentData.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }, this), !!userId && (commentData.auterId === userId || userEmail === \"admin@admin.admin\") && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          removeCommentsAction({\n            articleId,\n            commentId,\n            userId: commentData.auterId\n          }).then(req => {\n            console.log(req);\n\n            if (!!req.articleId) {\n              const q = comments.comments.filter(item => item.commentId !== commentId);\n              dispatch(removeComment(q));\n            }\n          }).catch(req => {\n            console.log('wwwww');\n          });\n        },\n        children: \"delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => sendForm(),\n        children: \"remake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 10\n  }, this);\n}\n\n_s(Comment, \"LWA8FzlVoOszcdPq5mps5hzMRpM=\", false, function () {\n  return [useAppSelector, useAppDispatch];\n});\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["useAppDispatch","useAppSelector","removeCommentsAction","month","remakeCommentsAction","removeComment","useRef","useState","Comment","articleId","userId","commentData","userEmail","commentId","comments","state","commentsReducer","main","refTextComment","commentRef","chengeComment","setChengeComment","dispatch","dateCreatin","Date","dateCreation","monthCreation","getMonth","dateInMonth","getDate","sendForm","text","current","value","name","auterId","then","req","console","log","q","filter","item","catch"],"sources":["/Users/gregory/Desktop/untitled folder 2/wwww/weather/client/src/components/Pages/Blog/Comment/index.tsx"],"sourcesContent":["import './index.scss';\nimport { useAppDispatch, useAppSelector } from '../../../../hooks/redux';\nimport { removeCommentsAction } from '../../../../store/comments/actions/removeComment.action';\nimport month from '../../../../helpers/months';\nimport { remakeCommentsAction } from '../../../../store/comments/actions/remakeComment.action';\nimport { CommentArticle, removeComment } from '../../../../store/comments/slices/comments.slice';\nimport { MutableRefObject, useRef, useState } from 'react';\n\ntype Props = {\n  articleId: string;\n  userId?: string;\n  commentData: CommentArticle;\n  userEmail?: string;\n}\n\n\nfunction Comment(\n  {articleId, userId, commentData, userEmail}: Props\n  // {text: string, commentId: string, articleId: string, name: string, dateCreation: string, auterId: string, userId: string}\n):JSX.Element {\n\n  const commentId = commentData.commentId\n  const comments = useAppSelector(state => state.commentsReducer.main)\n  const refTextComment = useRef() as MutableRefObject<HTMLTextAreaElement>\n  const commentRef = useRef() as MutableRefObject<HTMLDivElement>\n\n  // commentRef.current.innerHTML = \n  // const qqq = ()=> {\n  //   const URL = 'https://weather-back-deploy.herokuapp.com/main/api/users/b1e741c5-46ba-4705-91e7-b754ec3df054'\n\n  const [chengeComment, setChengeComment] = useState<boolean>(false)\n  //   fetchSend(URL)\n  //   .then((response) => response.json())\n  //   .then((json) => console.log(json));\n  // }\n\n  // function fetchSend(URL: string) {\n  //   return fetch(URL, {\n  //     method: 'GET'\n  //   })\n  // }\n\n\n  const dispatch = useAppDispatch()\n\n\n  // console.log(dateCreation)\n  // console.log(new Date(dateCreation).getDate())\n  const dateCreatin: Date = new Date(commentData.dateCreation)\n  const monthCreation = dateCreatin.getMonth()\n  const dateInMonth = dateCreatin.getDate()\n\n  const sendForm =()=> {\n    \n    if (chengeComment) {\n      commentData.text = refTextComment.current.value\n      remakeCommentsAction({articleId, commentData})\n    }\n    setChengeComment(!chengeComment)\n    \n  }\n\n\n  return <div \n    className={'article__comment'}\n  >\n\n\n    <div \n      className={'article__comment__top'}\n      ref={commentRef}\n    >\n      <div>{commentData.name}</div>\n      <div>\n        <span>{dateInMonth} </span>\n        <span>{month(monthCreation+1)}</span>\n        <span></span>\n      </div>\n    </div>\n\n\n    <span className={'article__comment__body'}>\n    {\n      chengeComment ? \n      <textarea\n        placeholder=\"Введите текст коммертария\"\n        ref={refTextComment}\n        defaultValue={commentData.text}\n      ></textarea> :\n      commentData.text\n    }\n    </span>\n\n    <div>\n      {/* <span>likes {likes.length} </span>\n      <span>dislikes {dislikes.length}</span> */}\n    </div>\n    {!!userId && (commentData.auterId === userId || userEmail === \"admin@admin.admin\") && \n      <>\n        <button\n          onClick={()=> {\n            removeCommentsAction({articleId, commentId, userId: commentData.auterId})\n            .then(req => {\n              console.log(req)\n              if (!!req.articleId) {\n                const q = comments.comments.filter(item => item.commentId !== commentId)\n                dispatch(removeComment(q))\n              }\n            })\n            .catch(req => {\n              console.log('wwwww')\n            })\n\n          }}\n        >delete</button>\n        <button\n          onClick={()=> sendForm()}\n        >remake</button>\n      </>\n    \n    }\n  </div>\n}\n\n\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}