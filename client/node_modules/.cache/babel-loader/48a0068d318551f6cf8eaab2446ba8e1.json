{"ast":null,"code":"var _jsxFileName = \"/Users/gregory/Desktop/untitled folder 2/wwww/weather/client/src/components/Pages/Blog/Articles/index.tsx\",\n    _s = $RefreshSig$();\n\nimport './index.scss';\nimport { useEffect } from \"react\";\nimport { useAppDispatch, useAppSelector } from \"../../../../hooks/redux\";\nimport { articlesAction } from \"../../../../store/articles/actions/articles.action\";\nimport { NavLink } from 'react-router-dom';\nimport { removeArticle } from '../../../../store/articles/actions/removeArticle.action';\nimport LoadingAnimation from '../../../../helpers/LoadingAnimation';\nimport { base_url, protocol } from '../../../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Articles() {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const selection = useAppSelector(state => state.articlesReducer.main);\n  const loading = useAppSelector(state => state.articlesReducer.loading);\n  const user = useAppSelector(state => state.ussersReducer.main);\n  useEffect(() => {\n    dispatch(articlesAction('')); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [0]);\n  const adminOrNot = (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        'display': 'flex',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(LoadingAnimation, {\n        userLoading: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 66\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blog__articles\",\n      children: !!selection ? madeArticles(selection) // статьи\n      : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u0441\\u043E\\u0435\\u0434\\u0438\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0431\\u044B\\u043B\\u043E \\u0440\\u0430\\u0437\\u043E\\u0440\\u0432\\u0430\\u043D\\u043E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n\n  function madeArticles(selection) {\n    return selection.length ? selection.map((item, index) => console.log('item auterId userId', user) || /*#__PURE__*/_jsxDEV(NavLink, {\n      to: `/blog/${item.articleId}`,\n      className: \"articles__item\",\n      style: {\n        \"backgroundImage\": `url(${protocol}://${base_url}/uploads/${item.cover})`\n      },\n      children: [checkArticleOwnership(user, item) &&\n      /*#__PURE__*/\n      // adminOrNot &&\n      //\n      _jsxDEV(\"button\", {\n        className: \"articles__item__delete\",\n        onClick: e => {\n          e.preventDefault();\n\n          if ((user === null || user === void 0 ? void 0 : user.email) === \"admin@admin.admin\") {\n            dispatch(removeArticle({\n              articleId: item.articleId,\n              userId: item.auterId\n            }));\n          } else {\n            dispatch(removeArticle({\n              articleId: item.articleId,\n              userId: user.userId\n            }));\n          } // item.articleId === user.userId ?\n          // dispatch(removeArticle({articleId: item.articleId, userId: user.userId})) :\n          // dispatch(addText.addText('Вы не тот администратор'))\n\n        },\n        children: \"delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: item.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u043D\\u0435\\u0442 \\u043D\\u0438 \\u043E\\u0434\\u043D\\u043E\\u0439 \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this);\n  }\n\n  ;\n\n  function checkArticleOwnership(user, article) {\n    if (user) {\n      if (user.email === \"admin@admin.admin\") {\n        return true;\n      } else {\n        return user.userId === article.auterId;\n      }\n    } else {\n      return false;\n    }\n  }\n}\n\n_s(Articles, \"xQC2kejWZCn6gne04/UJAKNg708=\", false, function () {\n  return [useAppDispatch, useAppSelector, useAppSelector, useAppSelector];\n});\n\n_c = Articles;\nexport default Articles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Articles\");","map":{"version":3,"names":["useEffect","useAppDispatch","useAppSelector","articlesAction","NavLink","removeArticle","LoadingAnimation","base_url","protocol","Articles","dispatch","selection","state","articlesReducer","main","loading","user","ussersReducer","adminOrNot","role","justifyContent","madeArticles","length","map","item","index","console","log","articleId","cover","checkArticleOwnership","e","preventDefault","email","userId","auterId","title","description","article"],"sources":["/Users/gregory/Desktop/untitled folder 2/wwww/weather/client/src/components/Pages/Blog/Articles/index.tsx"],"sourcesContent":["import './index.scss';\nimport { useEffect } from \"react\";\nimport { useAppDispatch, useAppSelector } from \"../../../../hooks/redux\";\nimport { articlesAction } from \"../../../../store/articles/actions/articles.action\";\nimport { NavLink } from 'react-router-dom';\nimport { removeArticle } from '../../../../store/articles/actions/removeArticle.action';\nimport LoadingAnimation from '../../../../helpers/LoadingAnimation';\nimport { base_url, protocol } from '../../../../constants';\nimport { addText } from '../../../../store/pushMessage/pushMessage.slice';\n\n\n\n\nfunction Articles(): JSX.Element {\n\n  const dispatch  = useAppDispatch();\n  const selection = useAppSelector(state => state.articlesReducer.main);\n  const loading   = useAppSelector(state => state.articlesReducer.loading);\n  const user      = useAppSelector(state => state.ussersReducer.main);\n\n  useEffect(()=> {\n    dispatch(articlesAction(''));\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[0]);\n  \n\n  const adminOrNot = user?.role === 'admin';\n\n  return <>\n    {\n      loading\n      ? \n      <div style={{'display': 'flex', justifyContent: 'center'}}><LoadingAnimation userLoading={loading} /></div> \n      :\n      <div className='blog__articles'>\n        {\n          !!selection\n          ?\n          madeArticles(selection) // статьи\n          :\n          <div>соединение было разорвано</div>\n        }\n      </div>\n    }\n  </>;\n\n  function madeArticles(selection: any) {\n    return selection.length\n    ?\n    selection.map((item: any, index: any) => console.log('item auterId userId', user) as any ||\n    <NavLink \n      key={index}\n      to={`/blog/${item.articleId}`} \n      className='articles__item'\n      style={{\"backgroundImage\": `url(${protocol}://${base_url}/uploads/${item.cover})`}}\n    >\n      {\n        checkArticleOwnership(user, item) && \n        // adminOrNot &&\n\n        //\n        <button\n          className={\"articles__item__delete\"}\n          onClick={(e)=> {\n            e.preventDefault();\n\n            if (user?.email === \"admin@admin.admin\") {\n              dispatch(removeArticle({articleId: item.articleId, userId: item.auterId}));\n            } else {\n              dispatch(removeArticle({articleId: item.articleId, userId: user!.userId}));\n            }\n            // item.articleId === user.userId ?\n            // dispatch(removeArticle({articleId: item.articleId, userId: user.userId})) :\n\n            // dispatch(addText.addText('Вы не тот администратор'))\n          }}\n        >delete</button>\n      }\n\n      <h4>{item.title}</h4>\n      <div><p>{item.description}</p></div>\n\n      {/* <div className='articles__statics'>\n        <div>likes {item.statistics.likes.length}</div>\n        <div>views {item.statistics.views.length}</div>\n        <div>dislikes {item.statistics.dislikes.length}</div>\n      </div> */}\n      \n      {/* {\n        !!item.cover\n        && \n        <img \n          style={{width: '100%', position: \"absolute\", top: '0px', left: '0px', opacity: '0.1'}}\n          src={`https://weather-back-deploy.herokuapp.com/uploads/${item.cover}`}\n          alt=\"\" \n        />\n      } */}\n    </NavLink>\n    )\n    :\n    <div>нет ни одной статьи</div>\n  };\n\n\n  function checkArticleOwnership(user: any, article: any) {\n    if (user) {\n      if (user.email === \"admin@admin.admin\") {\n        return true;\n      } else {\n        return user.userId === article.auterId;\n      }\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default Articles;"],"mappings":"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"},"metadata":{},"sourceType":"module"}